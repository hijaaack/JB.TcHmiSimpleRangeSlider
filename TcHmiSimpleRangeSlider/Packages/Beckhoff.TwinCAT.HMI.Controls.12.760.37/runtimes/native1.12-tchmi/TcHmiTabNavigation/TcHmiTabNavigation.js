var TcHmi;!function(TcHmi){!function(Controls){!function(Beckhoff){class TcHmiTabNavigation extends TcHmi.Controls.System.TcHmiControl{constructor(element,pcElement,attrs){super(element,pcElement,attrs),this.__newTabsData=!1,this.__fileHostAttributesCache=new Map,this.__tabChangeCallback=newTabName=>{if(!this.__tabs)return;let oldTab=this.__tabs.find((tab=>tab.name===this.__activeTabName));oldTab&&(oldTab.targetFileHostPreload||oldTab.targetFileHostKeepAlive?oldTab.targetFileHostPreAttach||this.__detachTargetFileHost(oldTab):(this.__detachTargetFileHost(oldTab),oldTab.fileHost?.destroy(),oldTab.fileHost=void 0));let activeTab=this.__tabs.find((tab=>tab.name===newTabName));this.__activeTabName=activeTab?.name,activeTab&&(activeTab.fileHost||this.__buildFileHost(activeTab),document.body.contains(activeTab.fileHost?.getElement()[0]??null)||this.__attachTargetFileHost(activeTab))},this.__onResolverForTabsWatchCallback=data=>{!1===this.__isAttached&&this.__suspendObjectResolver("Tabs"),tchmi_equal(data.value,this.__tabs)||(this.__newTabsData&&(this.__newTabsData=!1,this.__removeTabs(this.__tabs,!0)),this.__oldTabs=this.__tabs,this.__tabs=data.value,this.__fileHostAttributesCache.forEach(((fileHostAttributes,name)=>{if(this.__tabs)for(let tab of this.__tabs)tab.name===name&&"object"==typeof tab.targetFile&&"string"!=typeof fileHostAttributes&&(tab.targetFile.attributes=fileHostAttributes)})),TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"Tabs"}),this.__processTabs())}}__previnit(){if(this.__elementTemplateRoot=this.__element.find(".TcHmi_Controls_Beckhoff_TcHmiTabNavigation-template")[0],this.__elementContentTabs=this.__elementTemplateRoot.getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiTabNavigation-content-tabs")[0],!this.__elementTemplateRoot||!this.__elementContentTabs)throw new Error("Invalid Template.html");super.__previnit()}__init(){super.__init()}__attach(){super.__attach(),this.__elementContentTabs.addTabChangeCallback(this.__tabChangeCallback),this.__processTabs()}__detach(){super.__detach(),this.__elementContentTabs.removeTabChangeCallback(this.__tabChangeCallback)}destroy(){this.__keepAlive||super.destroy()}__buildFileHost(tab){if(tab.fileHost&&(tab.fileHost.destroy(),tab.fileHost=void 0),!tab.targetFile)return;let path=tab.targetFile.path,attributes=tab.targetFile.attributes;if(path)if(path.toLowerCase().endsWith(".content")){let attributesExtended={"data-tchmi-target-content":path,"data-tchmi-left":0,"data-tchmi-top":0,"data-tchmi-width":100,"data-tchmi-height":100,"data-tchmi-width-unit":"%","data-tchmi-height-unit":"%","data-tchmi-scrolling":"Auto"};tab.fileHost=TcHmi.ControlFactory.createEx("TcHmi.Controls.System.TcHmiRegion",this.getId()+".Region_"+tab.name,{...attributes,...attributesExtended},this)}else if(path?.toLowerCase().endsWith(".usercontrol")){let attributesExtended={"data-tchmi-target-user-control":path,"data-tchmi-left":0,"data-tchmi-top":0,"data-tchmi-width":100,"data-tchmi-height":100,"data-tchmi-width-unit":"%","data-tchmi-height-unit":"%"};tab.fileHost=TcHmi.ControlFactory.createEx("TcHmi.Controls.System.TcHmiUserControlHost",this.getId()+".UserControlHost_"+tab.name,{...attributes,...attributesExtended},this)}}__attachTargetFileHost(tab){tab.fileHost&&tab.contentElement&&(tab.contentElement.textContent="",tab.contentElement.append(tab.fileHost.getElement()[0]))}__detachTargetFileHost(tab){tab.fileHost?.getElement()[0].remove()}__buildLink(tab){switch(tab.linkElement=document.createElement("tchmi-tab-link"),tab.linkElement.textContent="",tab.linkElement.classList.add("tchmi-tab-navigation-tab-link"),tab.iconElement&&tab.linkElement.append(tab.iconElement),tab.linkElement.insertAdjacentHTML("beforeend",tab.displayName),tab.horizontalAlignment){case"Left":tab.linkElement.style.justifyContent="flex-start";break;case"Center":tab.linkElement.style.justifyContent="center";break;case"Right":tab.linkElement.style.justifyContent="flex-end";break;default:tab.linkElement.style.justifyContent=""}switch(tab.verticalAlignment){case"Top":tab.linkElement.style.alignItems="flex-start";break;case"Center":tab.linkElement.style.alignItems="center";break;case"Bottom":tab.linkElement.style.alignItems="flex-end";break;default:tab.linkElement.style.alignItems=""}}__buildIcon(tab){tab.icon?(tab.iconElement=document.createElement("div"),tab.iconElement.classList.add("tab-icon"),tab.iconElement.style.background=`url(${tab.icon.iconPath})`,tab.iconElement.style.backgroundSize=tab.icon.iconHeight+tab.icon.iconHeightUnit+" "+tab.icon.iconWidth+tab.icon.iconWidthUnit,tab.iconElement.style.height=tab.icon.iconHeight+tab.icon.iconHeightUnit,tab.iconElement.style.width=tab.icon.iconWidth+tab.icon.iconWidthUnit,tab.iconElement.style.minWidth=tab.icon.iconWidth+tab.icon.iconWidthUnit):tab.iconElement=void 0}__removeTabs(tabs,destroy=!1){if(tabs)for(const tab of tabs)tab.fileHost&&destroy&&(tab.fileHost.destroy(),tab.fileHost=void 0),this.__elementContentTabs.removeContentTab(tab.name)}setTabs(valueNew){let convertedValue=TcHmi.ValueConverter.toObject(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("Tabs")),this.__newTabsData=!0;let resolverInfo=this.__objectResolvers.get("tab");if(resolverInfo&&(resolverInfo.watchDestroyer&&resolverInfo.watchDestroyer(),resolverInfo.resolver.destroy()),this.__fileHostAttributesCache=new Map,null!==convertedValue)for(let value of convertedValue)value.targetFile&&value.targetFile.attributes&&(this.__fileHostAttributesCache.set(value.name,value.targetFile.attributes),"string"!=typeof value.targetFile.attributes&&(value.targetFile.attributes=void 0));let resolver=new TcHmi.Symbol.ObjectResolver(convertedValue,this);this.__objectResolvers.set("tab",{resolver:resolver,watchCallback:this.__onResolverForTabsWatchCallback,watchDestroyer:resolver.watch(this.__onResolverForTabsWatchCallback)})}getTabs(){return this.__tabs}__processTabs(){if(!this.__isAttached||!this.__tabs)return;let activeTabIndex=this.__oldTabs?.findIndex((tab=>tab.name===this.__elementContentTabs.activeTab))??0;this.__removeTabs(this.__oldTabs);for(let i=0;i<this.__tabs.length;i++){let tab=this.__tabs[i],oldTab=this.__oldTabs?.find((current=>current.targetFile&&tab.targetFile&&current.targetFile.path===tab.targetFile.path));if(oldTab&&!tab.fileHost){!!tchmi_equal(tab.targetFile.attributes,oldTab.targetFile.attributes)&&tab.targetFileHostPreload?(tab.fileHost=oldTab.fileHost,tab.contentElement=oldTab.contentElement,tab.linkElement=oldTab.linkElement,tab.iconElement=oldTab.iconElement,oldTab.fileHost=void 0):(oldTab.fileHost?.destroy(),oldTab.fileHost=void 0)}tab.contentElement||(tab.contentElement=document.createElement("tchmi-tab-content")),!tab.fileHost&&tab.targetFileHostPreload&&this.__buildFileHost(tab),tab.targetFileHostPreload&&tab.targetFileHostPreAttach&&this.__attachTargetFileHost(tab),tab.linkElement&&tab.displayName===oldTab?.displayName&&tchmi_equal(tab.icon,oldTab?.icon)&&tab.horizontalAlignment===oldTab?.horizontalAlignment&&tab.verticalAlignment===oldTab?.verticalAlignment||(this.__buildIcon(tab),this.__buildLink(tab)),tab.contentElement&&tab.linkElement&&this.__elementContentTabs.addContentTab(tab.name,tab.linkElement,tab.contentElement),i===activeTabIndex&&this.__elementContentTabs.openTab(tab.name)}if(this.__oldTabs)for(const oldTab of this.__oldTabs)oldTab.fileHost?.destroy(),oldTab.fileHost=void 0}setTabAlignment(valueNew){let convertedValue=TcHmi.ValueConverter.toString(valueNew);if(null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("TabAlignment")),convertedValue!==this.__tabAlignment){switch(convertedValue){case"Right":case"Bottom":case"Left":this.__tabAlignment=convertedValue;break;default:this.__tabAlignment="Top"}TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TabAlignment"}),this.__processTabAlignment()}}getTabAlignment(){return this.__tabAlignment}__processTabAlignment(){this.__tabAlignment&&this.__elementContentTabs.setTabAlignment(this.__tabAlignment)}__processBorderRadius(){super.__processBorderRadius(),TcHmi.StyleProvider.processBorderRadius(this.__elementContentTabs,this.__borderRadius)}}Beckhoff.TcHmiTabNavigation=TcHmiTabNavigation}(Controls.Beckhoff||(Controls.Beckhoff={}))}(TcHmi.Controls||(TcHmi.Controls={}))}(TcHmi||(TcHmi={})),TcHmi.Controls.registerEx("TcHmiTabNavigation","TcHmi.Controls.Beckhoff",TcHmi.Controls.Beckhoff.TcHmiTabNavigation);