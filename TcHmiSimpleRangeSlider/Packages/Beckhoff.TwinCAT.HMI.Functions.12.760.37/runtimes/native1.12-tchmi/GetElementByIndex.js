var TcHmi;!function(TcHmi){!function(Functions){!function(Beckhoff){Beckhoff.GetElementByIndex=function(ctx,arraySymbol,arrayIndex){if(!ctx)throw new TypeError("Parameter 'ctx' must be defined.");if(!ctx.success||!ctx.error)throw new TypeError("Parameter 'ctx' must be defined properly. Either 'success' or 'error' or both are missing.");if("function"!=typeof ctx.success||"function"!=typeof ctx.error)throw new TypeError("Parameter 'ctx' must be defined properly. Either 'success' or 'error' or both are not of type 'function'.");if(null===arraySymbol)return void ctx.error(TcHmi.Errors.E_PARAMETER_INVALID,{code:TcHmi.Errors.E_PARAMETER_INVALID,message:TcHmi.Errors[TcHmi.Errors.E_PARAMETER_INVALID],reason:"Function: GetElementByIndex; Requested array symbol is not set.",domain:"Function"});if(!(arraySymbol instanceof TcHmi.Symbol))return void ctx.error(TcHmi.Errors.E_PARAMETER_INVALID,{code:TcHmi.Errors.E_PARAMETER_INVALID,message:TcHmi.Errors[TcHmi.Errors.E_PARAMETER_INVALID],reason:"Function: GetElementByIndex; Parameter is no symbol.",domain:"Function"});const convertedArrayIndex=parseInt(arrayIndex,10);if(Number.isNaN(convertedArrayIndex))return void ctx.error(TcHmi.Errors.E_PARAMETER_INVALID,{code:TcHmi.Errors.E_PARAMETER_INVALID,message:TcHmi.Errors[TcHmi.Errors.E_PARAMETER_INVALID],reason:"Function: GetElementByIndex; Requested array index ("+arrayIndex+") is not a number.",domain:"Function"});if(convertedArrayIndex<0)return void ctx.error(TcHmi.Errors.E_PARAMETER_INVALID,{code:TcHmi.Errors.E_PARAMETER_INVALID,message:TcHmi.Errors[TcHmi.Errors.E_PARAMETER_INVALID],reason:"Function: GetElementByIndex; Requested array index ("+convertedArrayIndex+") is negative.",domain:"Function"});let arraySymbolExpression=arraySymbol.getExpression();if(arraySymbolExpression.getType()===TcHmi.SymbolType.Server){let content=arraySymbolExpression.getContent();if(!content)return void ctx.error(TcHmi.Errors.E_PARAMETER_INVALID,{code:TcHmi.Errors.E_PARAMETER_INVALID,message:TcHmi.Errors[TcHmi.Errors.E_PARAMETER_INVALID],reason:"Function: GetElementByIndex; Invalid format.",domain:"Function"});{let arraySymbolNew,firstPipePos=content?.indexOf("|");if(-1===firstPipePos)arraySymbolNew=new TcHmi.Symbol("%s%"+content+"["+convertedArrayIndex+"]%/s%");else{let part1=content.substring(0,firstPipePos),part2=content.substring(firstPipePos);arraySymbolNew=new TcHmi.Symbol("%s%"+part1+"["+convertedArrayIndex+"]"+part2+"%/s%")}if(ctx.delegatedWatch){let destroy=arraySymbolNew.watch((function(wdata){wdata.error===TcHmi.Errors.NONE?ctx.success(wdata.value):ctx.error(wdata.error,{code:wdata.error,message:TcHmi.Errors[wdata.error],reason:"Function: GetElementByIndex; Reading symbol value has failed.",domain:"Function",errors:wdata.details?[wdata.details]:void 0})}));ctx.destroy=()=>{destroy&&(destroy(),destroy=null)}}else arraySymbolNew.readEx((function(rdata){rdata.error===TcHmi.Errors.NONE?ctx.success(rdata.value):ctx.error(rdata.error,{code:rdata.error,message:TcHmi.Errors[rdata.error],reason:"Function: GetElementByIndex; Reading symbol value has failed.",domain:"Function",errors:rdata.details?[rdata.details]:void 0})}))}}else ctx.delegatedWatch?arraySymbol.watch((function(wdata){return wdata.error!==TcHmi.Errors.NONE?void ctx.error(wdata.error,{code:wdata.error,message:TcHmi.Errors[wdata.error],reason:"Function: GetElementByIndex; Reading symbol value has failed.",domain:"Function",errors:wdata.details?[wdata.details]:void 0}):Array.isArray(wdata.value)?wdata.value.length>convertedArrayIndex?void ctx.success(wdata.value[convertedArrayIndex]):void ctx.error(TcHmi.Errors.E_PARAMETER_INVALID,{code:TcHmi.Errors.E_PARAMETER_INVALID,message:TcHmi.Errors[TcHmi.Errors.E_PARAMETER_INVALID],reason:"Function: GetElementByIndex; Array length ("+wdata.value.length+") is smaller than requested array index ("+convertedArrayIndex+").",domain:"Function"}):void ctx.error(TcHmi.Errors.E_PARAMETER_INVALID,{code:TcHmi.Errors.E_PARAMETER_INVALID,message:TcHmi.Errors[TcHmi.Errors.E_PARAMETER_INVALID],reason:'Function: GetElementByIndex; Invalid type. Expected "arraySymbol" to be an array.',domain:"Function"})})):arraySymbol.readEx((function(rdata){return rdata.error!==TcHmi.Errors.NONE?void ctx.error(rdata.error,{code:rdata.error,message:TcHmi.Errors[rdata.error],reason:"Function: GetElementByIndex; Reading symbol value has failed.",domain:"Function",errors:rdata.details?[rdata.details]:void 0}):Array.isArray(rdata.value)?rdata.value.length>convertedArrayIndex?void ctx.success(rdata.value[convertedArrayIndex]):void ctx.error(TcHmi.Errors.E_PARAMETER_INVALID,{code:TcHmi.Errors.E_PARAMETER_INVALID,message:TcHmi.Errors[TcHmi.Errors.E_PARAMETER_INVALID],reason:"Function: GetElementByIndex; Array length ("+rdata.value.length+") is smaller than requested array index ("+convertedArrayIndex+").",domain:"Function"}):void ctx.error(TcHmi.Errors.E_PARAMETER_INVALID,{code:TcHmi.Errors.E_PARAMETER_INVALID,message:TcHmi.Errors[TcHmi.Errors.E_PARAMETER_INVALID],reason:'Function: GetElementByIndex; Invalid type. Expected "arraySymbol" to be an array.',domain:"Function"})}))}}(Functions.Beckhoff||(Functions.Beckhoff={}))}(TcHmi.Functions||(TcHmi.Functions={}))}(TcHmi||(TcHmi={})),TcHmi.Functions.registerFunctionEx("GetElementByIndex","TcHmi.Functions.Beckhoff",TcHmi.Functions.Beckhoff.GetElementByIndex);